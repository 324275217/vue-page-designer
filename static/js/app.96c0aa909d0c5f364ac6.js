webpackJsonp([1],{"0jJG":function(t,e){},"3nKj":function(t,e){},"89jG":function(t,e){},Aubw:function(t,e){},Gtj6:function(t,e){},IZjw:function(t,e){},Jy8R:function(t,e){t.exports=function(t){function e(n){if(i[n])return i[n].exports;var a=i[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=9)}([function(t,e){t.exports=function(t,e,i,n,a,s){var o,r=t=t||{},l=typeof t.default;"object"!==l&&"function"!==l||(o=t,r=t.default);var c="function"==typeof r?r.options:r;e&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0),i&&(c.functional=!0),a&&(c._scopeId=a);var u;if(s?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},c._ssrRegister=u):n&&(u=n),u){var v=c.functional,d=v?c.render:c.beforeCreate;v?(c._injectStyles=u,c.render=function(t,e){return u.call(e),d(t,e)}):c.beforeCreate=d?[].concat(d,u):[u]}return{esModule:o,exports:r,options:c}}},function(t,e,i){"use strict";var n=i(11);e.a={name:"braid-bg",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-smartphone"><rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect><line x1="12" y1="18" x2="12" y2="18"></line></svg>',title:"背景图",panel:n.a,setting:{type:"braid-bg",isUpload:!0,href:"",belong:"page"},props:["val"]}},function(t,e,i){"use strict";e.a={name:"braid-bg-style",props:["activeElement"]}},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var i=function(t,e){var i=t[1]||"",n=t[3];if(!n)return i;if(e&&"function"==typeof btoa){var a=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(n),s=n.sources.map(function(t){return"/*# sourceURL="+n.sourceRoot+t+" */"});return[i].concat(s).concat([a]).join("\n")}return[i].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+i+"}":i}).join("")},e.i=function(t,i){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},a=0;a<this.length;a++){var s=this[a][0];"number"==typeof s&&(n[s]=!0)}for(a=0;a<t.length;a++){var o=t[a];"number"==typeof o[0]&&n[o[0]]||(i&&!o[2]?o[2]=i:i&&(o[2]="("+o[2]+") and ("+i+")"),e.push(o))}},e}},function(t,e,i){function n(t){for(var e=0;e<t.length;e++){var i=t[e],n=c[i.id];if(n){n.refs++;for(var a=0;a<n.parts.length;a++)n.parts[a](i.parts[a]);for(;a<i.parts.length;a++)n.parts.push(s(i.parts[a]));n.parts.length>i.parts.length&&(n.parts.length=i.parts.length)}else{var o=[];for(a=0;a<i.parts.length;a++)o.push(s(i.parts[a]));c[i.id]={id:i.id,refs:1,parts:o}}}}function a(){var t=document.createElement("style");return t.type="text/css",u.appendChild(t),t}function s(t){var e,i,n=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(n){if(m)return p;n.parentNode.removeChild(n)}if(h){var s=d++;n=v||(v=a()),e=o.bind(null,n,s,!1),i=o.bind(null,n,s,!0)}else n=a(),e=function(t,e){var i=e.css,n=e.media,a=e.sourceMap;if(n&&t.setAttribute("media",n),a&&(i+="\n/*# sourceURL="+a.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}.bind(null,n),i=function(){n.parentNode.removeChild(n)};return e(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;e(t=n)}else i()}}function o(t,e,i,n){var a=i?"":n.css;if(t.styleSheet)t.styleSheet.cssText=f(e,a);else{var s=document.createTextNode(a),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(s,o[e]):t.appendChild(s)}}var r="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!r)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var l=i(17),c={},u=r&&(document.head||document.getElementsByTagName("head")[0]),v=null,d=0,m=!1,p=function(){},h="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());t.exports=function(t,e,i){m=i;var a=l(t,e);return n(a),function(e){for(var i=[],s=0;s<a.length;s++){var o=a[s];(r=c[o.id]).refs--,i.push(r)}for(e?n(a=l(t,e)):a=[],s=0;s<i.length;s++){var r;if(0===(r=i[s]).refs){for(var u=0;u<r.parts.length;u++)r.parts[u]();delete c[r.id]}}}};var f=function(){var t=[];return function(e,i){return t[e]=i,t.filter(Boolean).join("\n")}}()},function(t,e,i){"use strict";var n=i(18);e.a={name:"braid-pic",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-image"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>',title:"图片",panel:n.a,setting:{type:"braid-pic",isUpload:!0,hasGuide:!0,isChild:!0,left:0,z:0,href:"",belong:"page",animationName:""},props:["val","w","h","playState"]}},function(t,e,i){"use strict";e.a={name:"braid-pic-style",props:["activeElement"]}},function(t,e,i){"use strict";var n=i(24);e.a={name:"braid-txt",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-type"><polyline points="4 7 4 4 20 4 20 7"></polyline><line x1="9" y1="20" x2="15" y2="20"></line><line x1="12" y1="4" x2="12" y2="20"></line></svg>',title:"文本",panel:n.a,setting:{type:"braid-txt",hasGuide:!0,isChild:!0,width:650,height:100,left:50,top:0,z:0,lineHeight:1.6,fontSize:1.2,fontWeight:!1,color:"#000000",textAlign:"left",text:"文本",href:"",belong:"page",animationName:""},props:["val","h","w","playState"],data:function(){return{}},methods:{},computed:{isCurrent:function(){return"braid-txt"+this.i===this.id}}}},function(t,e,i){"use strict";e.a={name:"braid-txt-style",props:["activeElement"]}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(10),a=i(14),s=i(21);e.default={braidBg:n.a,braidPic:a.a,braidTxt:s.a}},function(t,e,i){"use strict";var n=i(1),a=i(13),s=i(0)(n.a,a.a,!1,null,null,null);s.options.__file="src/bg/index.vue",e.a=s.exports},function(t,e,i){"use strict";var n=i(2),a=i(12),s=i(0)(n.a,a.a,!1,null,null,null);s.options.__file="src/bg/style.vue",e.a=s.exports},function(t,e,i){"use strict";var n=function(){var t=this.$createElement;return(this._self._c||t)("div")};n._withStripped=!0;var a={render:n,staticRenderFns:[]};e.a=a},function(t,e,i){"use strict";var n=function(){var t=this.$createElement;return(this._self._c||t)("img",{attrs:{width:"100%","data-type":"braid-bg","data-uuid":this.val.uuid,src:this.val.url}})};n._withStripped=!0;var a={render:n,staticRenderFns:[]};e.a=a},function(t,e,i){"use strict";var n=i(5),a=i(20),s=i(0)(n.a,a.a,!1,function(t){i(15)},"data-v-04cf7604",null);s.options.__file="src/pic/index.vue",e.a=s.exports},function(t,e,i){var n=i(16);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals),i(4)("6f2e58e8",n,!1)},function(t,e,i){(t.exports=i(3)(void 0)).push([t.i,"\n.lz-image img[data-v-04cf7604] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n}\n",""])},function(t,e){t.exports=function(t,e){for(var i=[],n={},a=0;a<e.length;a++){var s=e[a],o=s[0],r={id:t+":"+a,css:s[1],media:s[2],sourceMap:s[3]};n[o]?n[o].parts.push(r):i.push(n[o]={id:o,parts:[r]})}return i}},function(t,e,i){"use strict";var n=i(6),a=i(19),s=i(0)(n.a,a.a,!1,null,null,null);s.options.__file="src/pic/style.vue",e.a=s.exports},function(t,e,i){"use strict";var n=function(){var t=this.$createElement;return(this._self._c||t)("div")};n._withStripped=!0;var a={render:n,staticRenderFns:[]};e.a=a},function(t,e,i){"use strict";var n=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"lz-image",class:[this.playState?"anm-"+this.val.animationName:""],style:{position:"page"===this.val.belong?"absolute":"relative",width:this.val.width/this.w*100+"%",height:this.val.height/this.h*100+"%",left:"page"===this.val.belong?this.val.left/this.w*100+"%":"0",top:"page"===this.val.belong?this.val.top/this.h*100+"%":"0",zIndex:this.val.z}},[e("img",{attrs:{"data-type":"braid-pic","data-uuid":this.val.uuid,src:this.val.url}})])};n._withStripped=!0;var a={render:n,staticRenderFns:[]};e.a=a},function(t,e,i){"use strict";var n=i(7),a=i(26),s=i(0)(n.a,a.a,!1,function(t){i(22)},"data-v-15741f6a",null);s.options.__file="src/txt/index.vue",e.a=s.exports},function(t,e,i){var n=i(23);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals),i(4)("288d041f",n,!1)},function(t,e,i){(t.exports=i(3)(void 0)).push([t.i,"\n.txt[data-v-15741f6a] {\n  outline: none;\n  font-size: 28px;\n}\n",""])},function(t,e,i){"use strict";var n=i(8),a=i(25),s=i(0)(n.a,a.a,!1,null,null,null);s.options.__file="src/txt/style.vue",e.a=s.exports},function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return"braid-txt"===t.activeElement.type?i("div",[i("hr"),t._v(" "),i("div",{staticClass:"panel-row",attrs:{flex:""}},[i("icon",{attrs:{name:"sliders"}}),t._v(" "),i("div",{staticClass:"panel-label"},[t._v("行高")]),t._v(" "),i("div",{staticClass:"panel-value"},[t._v(t._s(t.activeElement.lineHeight))]),t._v(" "),i("div",{staticClass:"panel-slider-wrap"},[i("slider",{attrs:{max:5,min:1},model:{value:t.activeElement.lineHeight,callback:function(e){t.$set(t.activeElement,"lineHeight",e)},expression:"activeElement.lineHeight"}})],1)],1),t._v(" "),i("div",{staticClass:"panel-row",attrs:{flex:""}},[i("icon",{attrs:{name:"type"}}),t._v(" "),i("div",{staticClass:"panel-label"},[t._v("字号")]),t._v(" "),i("div",{staticClass:"panel-value"},[t._v(t._s(t.activeElement.fontSize)+"rem")]),t._v(" "),i("div",{staticClass:"panel-slider-wrap"},[i("slider",{attrs:{step:.01,max:2,min:.85},model:{value:t.activeElement.fontSize,callback:function(e){t.$set(t.activeElement,"fontSize",e)},expression:"activeElement.fontSize"}})],1)],1),t._v(" "),i("div",{staticClass:"panel-row",attrs:{flex:""}},[i("icon",{attrs:{name:"edit-3"}}),t._v(" "),i("div",{staticClass:"panel-label"},[t._v("颜色")]),t._v(" "),i("div",{staticClass:"panel-value"},[t._v(t._s(t.activeElement.color))]),t._v(" "),i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.activeElement.color,expression:"activeElement.color"}],attrs:{type:"color"},domProps:{value:t.activeElement.color},on:{input:function(e){e.target.composing||t.$set(t.activeElement,"color",e.target.value)}}})])],1),t._v(" "),i("div",{staticClass:"panel-row",attrs:{flex:""}},[i("icon",{attrs:{name:"bold"}}),t._v(" "),i("div",{staticClass:"panel-label"},[t._v("加粗")]),t._v(" "),i("div",{staticClass:"panel-value"},[i("label",{staticClass:"form-switch"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.activeElement.fontWeight,expression:"activeElement.fontWeight"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.activeElement.fontWeight)?t._i(t.activeElement.fontWeight,null)>-1:t.activeElement.fontWeight},on:{change:function(e){var i=t.activeElement.fontWeight,n=e.target,a=!!n.checked;if(Array.isArray(i)){var s=t._i(i,null);n.checked?s<0&&(t.activeElement.fontWeight=i.concat([null])):s>-1&&(t.activeElement.fontWeight=i.slice(0,s).concat(i.slice(s+1)))}else t.$set(t.activeElement,"fontWeight",a)}}}),t._v(" "),i("i",{staticClass:"form-icon"})])])],1),t._v(" "),i("div",{staticClass:"panel-row",attrs:{flex:""}},[i("icon",{attrs:{name:"align-justify"}}),t._v(" "),i("div",{staticClass:"panel-label"},[t._v("对齐")]),t._v(" "),i("div",{staticClass:"panel-value"},[i("label",{staticClass:"form-radio tooltip",attrs:{"data-tooltip":"左对齐"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.activeElement.textAlign,expression:"activeElement.textAlign"}],attrs:{type:"radio",name:"align",value:"left"},domProps:{checked:t._q(t.activeElement.textAlign,"left")},on:{change:function(e){t.$set(t.activeElement,"textAlign","left")}}}),t._v(" "),i("i",{staticClass:"form-icon"}),t._v(" "),i("icon",{attrs:{name:"align-left"}})],1),t._v(" "),i("label",{staticClass:"form-radio tooltip",attrs:{"data-tooltip":"居中"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.activeElement.textAlign,expression:"activeElement.textAlign"}],attrs:{type:"radio",name:"align",value:"center"},domProps:{checked:t._q(t.activeElement.textAlign,"center")},on:{change:function(e){t.$set(t.activeElement,"textAlign","center")}}}),t._v(" "),i("i",{staticClass:"form-icon"}),t._v(" "),i("icon",{attrs:{name:"align-center"}})],1),t._v(" "),i("label",{staticClass:"form-radio tooltip",attrs:{"data-tooltip":"右对齐"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.activeElement.textAlign,expression:"activeElement.textAlign"}],attrs:{type:"radio",name:"align",value:"right"},domProps:{checked:t._q(t.activeElement.textAlign,"right")},on:{change:function(e){t.$set(t.activeElement,"textAlign","right")}}}),t._v(" "),i("i",{staticClass:"form-icon"}),t._v(" "),i("icon",{attrs:{name:"align-center"}})],1)])],1)]):t._e()};n._withStripped=!0;var a={render:n,staticRenderFns:[]};e.a=a},function(t,e,i){"use strict";var n=function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"txt",class:[this.playState?"anm-"+this.val.animationName:""],style:{position:"page"===this.val.belong?"absolute":"relative",left:"page"===this.val.belong?this.val.left/this.w*100+"%":"0",top:"page"===this.val.belong?this.val.top/this.h*100+"%":"0",width:this.val.width/this.w*100+"%",height:this.val.height/this.h*100+"%",zIndex:this.val.z,lineHeight:this.val.lineHeight,fontSize:this.val.fontSize+"rem",color:this.val.color,textAlign:this.val.textAlign,fontWeight:this.val.fontWeight?"bold":"normal"},attrs:{"data-type":"braid-txt","data-uuid":this.val.uuid},domProps:{innerHTML:this._s(this.val.text)}})};n._withStripped=!0;var a={render:n,staticRenderFns:[]};e.a=a}])},Pa1R:function(t,e,i){"use strict";function n(t,e){return"function"==typeof e?e:t[e]}function a(t){return Array.isArray(t)?t.map(function(t){return{k:t,v:t}}):_()(t).map(function(e){return{k:e,v:t[e]}})}function s(t,e,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[t];["duration","timing","delay","iteration","direction","fill"].map(function(t){void 0!==e[t]&&("duration"===t||"delay"===t?a.push(e[t]+"s"):"iteration"===t?a.push(0===e[t]?"infinite":e[t]):a.push(e[t]))});var s="animation: "+a.join(" ")+";",o=[];n?i.map(function(t){o.push("\t"+t.stop+"% {\n"),o.push("\t\t"+t.css+"\n\t}\n")}):i.map(function(t){o.push(t.stop+"% {"),o.push(t.css+"}")});var r=o.join("");return"\n.anm-"+t+" {\n  -webkit-"+s+"\n  "+s+"\n}\n@keyframes "+t+" {\n"+r+"}\n@-webkit-keyframes "+t+" {\n"+r+"}\n"}Object.defineProperty(e,"__esModule",{value:!0});var o=i("7+uW"),r=i("//Fk"),l=i.n(r),c=i("mvHQ"),u=i.n(c),v=i("Jy8R"),d=i.n(v),m=i("Zrlr"),p=i.n(m),h=i("wxAW"),f=i.n(h),g=i("fZjL"),_=i.n(g),w=function(t){return function(e){var i={},n=a(e),s=function(e){var a=n[e];i[e]=function(){var e=t||this.$store;return"function"==typeof a?a.call(this,e.state):e.state[a]}};for(var o in n)s(o);return i}},y=function(t,e,i){return function(n){var s={},o=a(n),r=function(n){var a=o[n];s[n]=function(n){var s=i||this.$store,o=s[t],r=s[e],l="function"==typeof a?a.call(this,o):a;return r.call(s,l,n)}};for(var l in o)r(l);return s}},b=function(){function t(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=i.state,a=i.mutations,s=void 0===a?{}:a,r=i.actions,l=void 0===r?{}:r,c=i.plugins,u=i.subscribers,v=void 0===u?[]:u;p()(this,t),this.vm=new o.a({data:{$$state:"function"==typeof n?n():n}}),this.mutations=s,this.actions=l,this.subscribers=v,c&&c.forEach(function(t){return e.use(t)}),this.mapState=w(this),this.mapActions=y("actions","dispatch",this),this.mapMutations=y("mutations","commit",this)}return f()(t,null,[{key:"install",value:function(t){t.mixin({beforeCreate:function(){this.$store=this.$options.store||this.$parent&&this.$parent.$store}})}}]),f()(t,[{key:"subscribe",value:function(t){var e=this;return this.subscribers.push(t),function(){return e.subscribers.splice(e.subscribers.indexOf(t),1)}}},{key:"commit",value:function(t,e){var i=this;this.subscribers.forEach(function(n){return n({type:t,payload:e},i.state)});var a=n(this.mutations,t);return a&&a(this.state,e)}},{key:"dispatch",value:function(t,e){var i=n(this.actions,t),a={state:this.state,dispatch:this.dispatch.bind(this),commit:this.commit.bind(this)};return l.a.resolve(i&&i(a,e))}},{key:"use",value:function(t){return t(this),this}},{key:"replaceState",value:function(t){return this.vm.$data.$$state=t,this}},{key:"state",get:function(){return this.vm.$data.$$state},set:function(t){0}}]),t}(),C=(w(),y("actions","dispatch"),y("mutations","commit"),{top:0,zoom:64,type:"page",index:-1,uuid:null,counter:0,originX:0,originY:0,startX:0,startY:0,moving:!1,animation:[],playState:!1,activeElement:{},page:{page:!0,title:"测试页面",height:1500,endTime:new Date,backgroundColor:"#fff"},widgets:[]}),x={addWidget:function(t,e){var i=t.state,n=t.commit;e.setting.isUpload?window.$communicator.$emit("upload",function(t){n("addWidget",{data:t,item:e})},!0):(n("addWidget",{item:e}),n("select",{uuid:i.widgets[i.widgets.length-1].uuid}))},save:function(t){var e=t.state;window.$communicator.$emit("save",e)}},E=i("woOf"),$=i.n(E),k=i("eXoM"),A={select:function(t,e){if(t.uuid=e.uuid,-1===e.uuid)t.activeElement=t.page,t.type="page";else{var i=t.widgets.find(function(t){return t.uuid===e.uuid});t.activeElement=i,t.type=i.type}},initmove:function(t,e){t.startX=e.startX,t.startY=e.startY,t.originX=e.originX,t.originY=e.originY,t.moving=!0},stopmove:function(t){t.moving=!1},move:function(t,e){var i=t.activeElement,n=e.x-t.startX,a=e.y-t.startY,s=t.originX+Math.floor(100*n/t.zoom),o=t.originY+Math.floor(100*a/t.zoom);i.left=s>0?s:0,i.top=o>0?o:0},resize:function(t,e){var i,n=e.x-t.startX,a=e.y-t.startY;if("right"===e.type)return i=t.originX+Math.floor(100*n/t.zoom),void(t.activeElement.width=i>10?i:10);if("down"===e.type)return i=t.originX+Math.floor(100*a/t.zoom),void(t.activeElement.height=i>10?i:10);if("left"===e.type){var s=t.originX+Math.floor(100*n/t.zoom),o=t.originY-Math.floor(100*n/t.zoom);return t.activeElement.left=s>0?s:0,void(t.activeElement.width=o>10?o:10)}if("up"===e.type){var r=t.originX+Math.floor(100*a/t.zoom),l=t.originY-Math.floor(100*a/t.zoom);t.activeElement.top=r>0?r:0,t.activeElement.height=l>10?l:10}},copy:function(t,e){if("braid-pic"===t.type||"braid-txt"===t.type||"braid-container"===t.type){var i=$()({},t.activeElement);if("braid-container"===t.type){var n=t.activeElement.name;if(n){var a=n.split("-")[0]+"-"+t.counter;i.name=a;for(var s=0,o=t.widgets.length;s<o;s++)t.widgets[s].belong===n&&t.widgets.push($()({},t.widgets[s],{belong:a}));t.counter+=1}else window.$communicator.$emit("notify",{info:"只有命名容器才能复制，请先命名"})}t.widgets.push(i)}},updateSrollTop:function(t,e){t.top=e},zoom:function(t,e){t.zoom=e},initActive:function(t){t.activeElement=t.page},delete:function(t){var e=t.type;if("page"!==e){if("braid-container"===e)for(var i=t.activeElement.name,n=0;n<t.widgets.length;n++)t.widgets[n].belong===i&&t.widgets.splice(n,1);t.widgets.splice(t.index,1),t.activeElement=t.page,t.uuid=-1}},addWidget:function(t,e){var i=e.data,n=void 0===i?null:i,a=e.item,s={top:t.top,uuid:k("1234567890abcdef",10)},o=JSON.parse(u()(a.setting));"braid-container"===o.type&&(o.name=s.uuid),n?n.forEach(function(e){t.widgets.push($()(o,e,s))}):t.widgets.push($()(o,s))},replaceImage:function(t,e){t.activeElement.width=e[0].width,t.activeElement.url=e[0].url},addContainerBackPic:function(t,e){t.activeElement.backPic=e[0].url,t.activeElement.backPicUrl=e[0].src,t.activeElement.width=e[0].width,t.activeElement.height=e[0].height},addAnimation:function(t){t.animation.push({name:"",duration:3,delay:0,iteration:1,timing:"linear",direction:"normal",fill:"none",keyframes:[{stop:0,css:""}]})},addkeyframe:function(t,e){t.animation.map(function(t){t.name===e&&t.keyframes.push({stop:0,css:""})})},setAnimation:function(t,e){t.playState=e}};o.a.use(b);var S,N=new b({state:C,actions:x,mutations:A}),z={name:"braid-container-style",props:["activeElement"],methods:{addPic:function(){var t=this;window.$communicator.$emit("upload",function(e){t.$store.commit("addContainerBackPic",e)})}}},M={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return"braid-container"===t.activeElement.type?i("div",[i("hr"),t._v(" "),i("div",{staticClass:"panel-row"},[i("icon",{attrs:{name:"credit-card"}}),t._v(" "),i("div",{staticClass:"panel-label"},[t._v("容器名称")]),t._v(" "),i("div",{staticClass:"panel-value"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.activeElement.name,expression:"activeElement.name",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"容器名称必填"},domProps:{value:t.activeElement.name},on:{input:function(e){e.target.composing||t.$set(t.activeElement,"name",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])],1),t._v(" "),i("div",{staticClass:"panel-row"},[i("icon",{attrs:{name:"grid"}}),t._v(" "),i("div",{staticClass:"panel-label"},[t._v("display")]),t._v(" "),i("div",{staticClass:"panel-value"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.activeElement.display,expression:"activeElement.display"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.activeElement,"display",e.target.multiple?i:i[0])}}},[i("option",[t._v("flex")]),t._v(" "),i("option",[t._v("block")])])])],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"flex"===t.activeElement.display,expression:"activeElement.display === 'flex'"}],staticClass:"panel-row"},[i("icon",{attrs:{name:"shuffle"}}),t._v(" "),i("div",{staticClass:"panel-label"},[t._v("主轴方向")]),t._v(" "),i("div",{staticClass:"panel-value"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.activeElement.dir,expression:"activeElement.dir"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.activeElement,"dir",e.target.multiple?i:i[0])}}},[i("option",[t._v("row")]),t._v(" "),i("option",[t._v("row-reverse")]),t._v(" "),i("option",[t._v("column")]),t._v(" "),i("option",[t._v("column-reverse")])])])],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"flex"===t.activeElement.display,expression:"activeElement.display === 'flex'"}],staticClass:"panel-row"},[i("icon",{attrs:{name:"align-justify"}}),t._v(" "),i("div",{staticClass:"panel-label"},[t._v("主轴分布")]),t._v(" "),i("div",{staticClass:"panel-value"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.activeElement.justify,expression:"activeElement.justify"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.activeElement,"justify",e.target.multiple?i:i[0])}}},[i("option",[t._v("flex-start")]),t._v(" "),i("option",[t._v("space-between")]),t._v(" "),i("option",[t._v("center")]),t._v(" "),i("option",[t._v("space-around")]),t._v(" "),i("option",[t._v("flex-end")])])])],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"flex"===t.activeElement.display,expression:"activeElement.display === 'flex'"}],staticClass:"panel-row"},[i("icon",{attrs:{name:"align-center"}}),t._v(" "),i("div",{staticClass:"panel-label"},[t._v("侧轴分布")]),t._v(" "),i("div",{staticClass:"panel-value"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.activeElement.align,expression:"activeElement.align"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.activeElement,"align",e.target.multiple?i:i[0])}}},[i("option",[t._v("flex-start")]),t._v(" "),i("option",[t._v("center")]),t._v(" "),i("option",[t._v("flex-end")])])])],1),t._v(" "),i("hr"),t._v(" "),i("div",{staticClass:"panel-row"},[i("icon",{attrs:{name:"target"}}),t._v(" "),i("div",{staticClass:"panel-label"},[t._v("背景色")]),t._v(" "),i("div",{staticClass:"panel-value"},[t._v(t._s(t.activeElement.bgColor))]),t._v(" "),i("div",{staticClass:"panel-value"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.activeElement.bgColor,expression:"activeElement.bgColor"}],attrs:{type:"color"},domProps:{value:t.activeElement.bgColor},on:{input:function(e){e.target.composing||t.$set(t.activeElement,"bgColor",e.target.value)}}})])],1),t._v(" "),i("div",{staticClass:"panel-row"},[i("icon",{attrs:{name:"image"}}),t._v(" "),i("div",{staticClass:"panel-label"},[t._v("背景图")]),t._v(" "),i("div",{staticClass:"panel-value"},[i("div",{staticClass:"panel-preview",style:{backgroundImage:"url("+t.activeElement.backPic+")"},on:{click:t.addPic}},[i("icon",{directives:[{name:"show",rawName:"v-show",value:!t.activeElement.backPic,expression:"!activeElement.backPic"}],attrs:{name:"plus"}})],1)])],1),t._v(" "),i("div",{staticClass:"panel-row"},[i("icon",{attrs:{name:"square"}}),t._v(" "),i("div",{staticClass:"panel-label"},[t._v("圆角")]),t._v(" "),i("div",{staticClass:"panel-value"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.activeElement.radius,expression:"activeElement.radius"}],attrs:{type:"text"},domProps:{value:t.activeElement.radius},on:{input:function(e){e.target.composing||t.$set(t.activeElement,"radius",e.target.value)}}})])],1),t._v(" "),i("div",{staticClass:"panel-row"},[i("icon",{attrs:{name:"maximize"}}),t._v(" "),i("div",{staticClass:"panel-label"},[t._v("边的宽度")]),t._v(" "),i("div",{staticClass:"panel-value"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.activeElement.borderWidth,expression:"activeElement.borderWidth"}],attrs:{type:"text"},domProps:{value:t.activeElement.borderWidth},on:{input:function(e){e.target.composing||t.$set(t.activeElement,"borderWidth",e.target.value)}}})])],1),t._v(" "),i("div",{staticClass:"panel-row"},[i("icon",{attrs:{name:"edit-3"}}),t._v(" "),i("div",{staticClass:"panel-label"},[t._v("边的颜色")]),t._v(" "),i("div",{staticClass:"panel-value"},[t._v(t._s(t.activeElement.borderColor))]),t._v(" "),i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.activeElement.borderColor,expression:"activeElement.borderColor"}],attrs:{type:"color"},domProps:{value:t.activeElement.borderColor},on:{input:function(e){e.target.composing||t.$set(t.activeElement,"borderColor",e.target.value)}}})])],1)]):t._e()},staticRenderFns:[]},P={name:"braid-container",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-layout"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line><line x1="9" y1="21" x2="9" y2="9"></line></svg>',title:"容器",panel:i("VU/8")(z,M,!1,null,null,null).exports,setting:{type:"braid-container",hasGuide:!0,name:"",width:650,height:300,left:50,top:0,z:0,display:"flex",bgColor:"",backPic:"",backPicUrl:"",radius:0,borderColor:"",borderWidth:0,dir:"row",justify:"flex-start",align:"flex-start",belong:"page",animationName:""},props:["h","val","playState"],computed:{childs:function(){var t=this;return this.$store.state.widgets.filter(function(e){return e.belong===t.val.name})},current:function(){return this.$store.state.uuid}}},U={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"lz-container",class:[t.playState?"anm-"+t.val.animationName:""],style:{display:t.val.display,position:"absolute",width:t.val.width/7.5+"%",height:t.val.height/t.h*100+"%",left:t.val.left/7.5+"%",top:t.val.top/t.h*100+"%",zIndex:t.val.z,backgroundColor:t.val.bgColor,backgroundImage:"url("+t.val.backPic+")",borderStyle:"solid",borderRadius:t.val.radius+"px",borderColor:t.val.borderColor,borderWidth:t.val.borderWidth+"px",flexDirection:t.val.dir,justifyContent:t.val.justify,alignItems:t.val.align},attrs:{"data-type":"braid-container","data-uuid":t.val.uuid}},t._l(t.childs,function(e){return i(e.type,{key:e.uuid,tag:"component",staticClass:"layer layer-child",class:{"g-active":t.current===e.uuid},attrs:{val:e,h:e.height,w:e.width,playState:t.playState}})}))},staticRenderFns:[]},R={braidContainer:i("VU/8")(P,U,!1,function(t){i("uOz5")},"data-v-03787886",null).exports},T={},j={install:function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.installed||(S=$()({},R,i.widgets),_()(S).forEach(function(t){e.component(t,S[t]);var i=$()({},S[t].panel);e.component(i.name,i),T[i.name]=i,delete S[t].panel}))},getWidgets:function(){return S},getWidgetStyle:function(){return T}},W={mounted:function(){var t=this;document.addEventListener("keyup",function(e){e.stopPropagation(),e.ctrlKey&&67===e.keyCode&&t.$store.commit("copy")},!0),document.addEventListener("keyup",function(e){e.stopPropagation(),46===e.keyCode&&t.$store.commit("delete")},!0)},methods:{preview:function(){},save:function(){this.$store.dispatch("save")},copyWidget:function(){this.$store.commit("copy")},dele:function(){this.$store.commit("delete")}},computed:{show:function(){return"page"!==this.$store.state.type}}},O={render:function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"navbar"},[e("section",{staticClass:"logo navbar-section"},[e("icon",{attrs:{name:"anchor"}})],1),this._v(" "),e("section",{staticClass:"navbar-section"},[e("a",{staticClass:"btn btn-link tooltip tooltip-bottom",attrs:{"data-tooltip":"复制元件 Ctrl + C"},on:{click:this.copyWidget}},[e("icon",{attrs:{name:"copy"}}),this._v(" 复制\n    ")],1),this._v(" "),e("a",{staticClass:"btn btn-link tooltip tooltip-bottom",attrs:{"data-tooltip":"删除元件 Ctrl + D"},on:{click:this.dele}},[e("icon",{attrs:{name:"trash-2"}}),this._v(" 删除\n    ")],1),this._v(" "),e("a",{staticClass:"btn btn-link tooltip tooltip-bottom",attrs:{href:"#","data-tooltip":"预览 Ctrl + P"},on:{click:this.preview}},[e("icon",{attrs:{name:"airplay"}}),this._v(" 预览")],1),this._v(" "),e("a",{staticClass:"btn btn-link tooltip tooltip-bottom",attrs:{href:"#","data-tooltip":"预览 Ctrl + S"},on:{click:this.save}},[e("icon",{attrs:{name:"save"}}),this._v(" 保存")],1)])])},staticRenderFns:[]},V=i("VU/8")(W,O,!1,function(t){i("ZxMX")},null,null).exports,L={methods:{initmovement:function(t){var e=this.$store.state.activeElement;this.$store.commit("initmove",{startX:t.pageX,startY:t.pageY,originX:e.left,originY:e.top}),document.addEventListener("mousemove",this.handlemousemove,!0),document.addEventListener("mouseup",this.handlemouseup,!0)},handlemousemove:function(t){t.stopPropagation(),t.preventDefault(),this.$store.commit("move",{x:t.pageX,y:t.pageY})},handlemouseup:function(){document.removeEventListener("mousemove",this.handlemousemove,!0),document.removeEventListener("mouseup",this.handlemouseup,!0),this.$store.commit("stopmove")}}},F={mixins:[L],props:["zoom"],data:function(){return{}},computed:{widgets:function(){return j.getWidgets()},layers:function(){return this.$store.state.widgets},activeElement:function(){return this.$store.state.activeElement}},methods:{addWidget:function(t,e){this.$store.dispatch("addWidget",e)},updateSrollTop:function(){var t=document.getElementById("viewport").scrollTop/this.zoom*100;this.$store.commit("updateSrollTop",t)},activeLayer:function(t,e){this.$store.commit("select",{uuid:e.uuid});var i=document.querySelector("#viewport"),n=i.querySelector("[data-uuid='"+e.uuid+"']");n&&!function(t){var e=t.getBoundingClientRect();return e.top<window.innerHeight&&e.left<window.innerWidth&&e.right>0}(n)&&(i.scrollTop=(function(t){var e=0,i=0;do{e+=t.offsetTop||0,i+=t.offsetLeft||0,t=t.offsetParent}while(t);return{top:e,left:i}}(n).top-50)*this.zoom/100)}}},X={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"menu-bar"},[i("details",{attrs:{open:""}},[i("summary",[i("icon",{attrs:{name:"list"}}),t._v("可用组件")],1),t._v(" "),i("ul",{staticClass:"widget-list",on:{mousedown:t.updateSrollTop}},t._l(t.widgets,function(e){return i("li",{key:e.name,staticClass:"menu-item",on:{click:function(i){t.addWidget(i,e)}}},[i("icon",{attrs:{svg:e.icon,title:e.title}}),t._v(" "),i("span",{staticClass:"menu-caption"},[t._v(t._s(e.title))])],1)}))]),t._v(" "),i("details",[i("summary",[i("icon",{attrs:{name:"layers"}}),t._v("已加组件")],1),t._v(" "),i("ul",{staticClass:"layer-list"},t._l(t.layers,function(e){return i("li",{key:e.uuid,class:{"layer-active":e===t.activeElement},on:{click:function(i){t.activeLayer(i,e)}}},[t._v(t._s(e.type))])}))])])},staticRenderFns:[]},B=i("VU/8")(F,X,!1,function(t){i("0jJG")},null,null).exports,D={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.activeElement.page&&1===t.tab?i("div",{staticClass:"panel-wrap"},[i("div",{staticClass:"panel-row",attrs:{flex:""}},[i("icon",{attrs:{name:"type"}}),t._v(" "),i("div",{staticClass:"panel-label"},[t._v("页面标题")]),t._v(" "),i("div",{staticClass:"panel-value"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.activeElement.title,expression:"activeElement.title"}],attrs:{type:"text"},domProps:{value:t.activeElement.title},on:{input:function(e){e.target.composing||t.$set(t.activeElement,"title",e.target.value)}}})])],1),t._v(" "),i("div",{staticClass:"panel-row",attrs:{flex:""}},[i("icon",{attrs:{name:"smartphone"}}),t._v(" "),i("div",{staticClass:"panel-label"},[t._v("页面高度")]),t._v(" "),i("div",{staticClass:"panel-value"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.activeElement.height,expression:"activeElement.height"}],attrs:{type:"text"},domProps:{value:t.activeElement.height},on:{input:function(e){e.target.composing||t.$set(t.activeElement,"height",e.target.value)}}})])],1),t._v(" "),i("div",{staticClass:"panel-row",attrs:{flex:""}},[i("icon",{attrs:{name:"droplet"}}),t._v(" "),i("div",{staticClass:"panel-label"},[t._v("页面背景色")]),t._v(" "),i("div",{staticClass:"panel-value"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.activeElement.backgroundColor,expression:"activeElement.backgroundColor"}],attrs:{type:"color"},domProps:{value:t.activeElement.backgroundColor},on:{input:function(e){e.target.composing||t.$set(t.activeElement,"backgroundColor",e.target.value)}}})])],1),t._v(" "),i("div",{staticClass:"panel-row",attrs:{flex:""}},[i("icon",{attrs:{name:"clock"}}),t._v(" "),i("div",{staticClass:"panel-label"},[t._v("截止日期")]),t._v(" "),i("div",{staticClass:"panel-value"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.activeElement.endTime,expression:"activeElement.endTime"}],attrs:{type:"date"},domProps:{value:t.activeElement.endTime},on:{input:function(e){e.target.composing||t.$set(t.activeElement,"endTime",e.target.value)}}})])],1)]):t._e()},staticRenderFns:[]},I={name:"panel-style",props:["activeElement","tab"],data:function(){return{}},computed:{widgetStyle:function(){return j.getWidgetStyle()},height:function(){return this.$store.state.page.height},containerName:function(){var t=[];return this.$store.state.widgets.map(function(e){return"braid-container"===e.type&&e.name&&t.push(e.name)}),t}}},Y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.activeElement.page||1!==t.tab?t._e():i("div",{staticClass:"panel-wrap"},[i("div",{staticClass:"panel-row"},[i("icon",{attrs:{name:"layers"}}),t._v(" "),i("div",{staticClass:"panel-label"},[t._v("层级")]),t._v(" "),i("div",{staticClass:"panel-value"},[t._v(t._s(t.activeElement.z))]),t._v(" "),i("div",{staticClass:"panel-slider-wrap"},[i("slider",{attrs:{step:1,max:20},model:{value:t.activeElement.z,callback:function(e){t.$set(t.activeElement,"z",e)},expression:"activeElement.z"}})],1)],1),t._v(" "),i("div",{staticClass:"panel-row"},[i("icon",{attrs:{name:"more-horizontal"}}),t._v(" "),i("div",{staticClass:"panel-label"},[t._v("宽度")]),t._v(" "),i("div",{staticClass:"panel-value"},[t._v(t._s(t.activeElement.width))]),t._v(" "),i("div",{staticClass:"panel-slider-wrap"},[i("slider",{attrs:{step:1,max:750},model:{value:t.activeElement.width,callback:function(e){t.$set(t.activeElement,"width",e)},expression:"activeElement.width"}})],1)],1),t._v(" "),i("div",{staticClass:"panel-row"},[i("icon",{attrs:{name:"more-vertical"}}),t._v(" "),i("div",{staticClass:"panel-label"},[t._v("高度")]),t._v(" "),i("div",{staticClass:"panel-value"},[t._v(t._s(t.activeElement.height))]),t._v(" "),i("div",{staticClass:"panel-slider-wrap"},[i("slider",{attrs:{step:1,max:t.height},model:{value:t.activeElement.height,callback:function(e){t.$set(t.activeElement,"height",e)},expression:"activeElement.height"}})],1)],1),t._v(" "),i("div",{staticClass:"panel-row"},[i("icon",{attrs:{name:"arrow-right"}}),t._v(" "),i("div",{staticClass:"panel-label"},[t._v("横坐标")]),t._v(" "),i("div",{staticClass:"panel-value"},[t._v(t._s(t.activeElement.left))]),t._v(" "),i("div",{staticClass:"panel-slider-wrap"},[i("slider",{attrs:{step:1,max:750},model:{value:t.activeElement.left,callback:function(e){t.$set(t.activeElement,"left",e)},expression:"activeElement.left"}})],1)],1),t._v(" "),i("div",{staticClass:"panel-row"},[i("icon",{attrs:{name:"arrow-down"}}),t._v(" "),i("div",{staticClass:"panel-label"},[t._v("纵坐标")]),t._v(" "),i("div",{staticClass:"panel-value"},[t._v(t._s(t.activeElement.top))]),t._v(" "),i("div",{staticClass:"panel-slider-wrap"},[i("slider",{attrs:{step:1,max:t.height},model:{value:t.activeElement.top,callback:function(e){t.$set(t.activeElement,"top",e)},expression:"activeElement.top"}})],1)],1),t._v(" "),t._l(t.widgetStyle,function(e,n){return i(t.widgetStyle[n],{key:n,tag:"component",attrs:{activeElement:t.activeElement}})}),t._v(" "),"braid-pic"===t.activeElement.type||"braid-txt"===t.activeElement.type?i("div",[i("hr"),t._v(" "),i("div",{staticClass:"panel-row"},[i("icon",{attrs:{name:"layout"}}),t._v(" "),i("div",{staticClass:"panel-label"},[t._v("所属容器")]),t._v(" "),i("div",{staticClass:"panel-value"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.activeElement.belong,expression:"activeElement.belong"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.activeElement,"belong",e.target.multiple?i:i[0])}}},[i("option",[t._v("page")]),t._v(" "),t._l(t.containerName,function(e,n){return i("option",{key:n},[t._v(t._s(e))])})],2)])],1)]):t._e()],2)},staticRenderFns:[]},H={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return 2===t.tab?i("div",{staticClass:"panel-wrap"},[i("div",{staticClass:"panel-row"},[i("icon",{attrs:{name:"link"}}),t._v(" "),i("div",{staticClass:"panel-label"},[t._v("点击时")])],1),t._v(" "),void 0!==t.activeElement.href?i("div",{staticClass:"panel-row"},[i("div",{staticClass:"panel-label"},[t._v("链接至")]),t._v(" "),i("div",{staticClass:"panel-value"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.activeElement.href,expression:"activeElement.href"}],attrs:{type:"text",placeholder:"绝对路径，以https://开头"},domProps:{value:t.activeElement.href},on:{input:function(e){e.target.composing||t.$set(t.activeElement,"href",e.target.value)}}})])]):t._e()]):t._e()},staticRenderFns:[]},q={name:"panel-animation",props:["activeElement","tab"],data:function(){return{currentName:"",currentAnimation:null}},computed:{animationNames:function(){var t=[];return this.$store.state.animation.map(function(e){return t.push(e.name)}),t}},methods:{addAnimation:function(){this.$store.state.animation.some(function(t){return""===t.name})?window.$communicator.$emit("notify",{info:"还有未命名动画，请先命名"}):(this.$store.commit("addAnimation"),this.currentName="",this.getCurrentAnimation(""))},getCurrentAnimation:function(t){var e=this.$store.state.animation.filter(function(e){return e.name===t});this.currentAnimation=e[0]},addkeyframe:function(){var t=this.currentAnimation.name;""!==t?this.$store.commit("addkeyframe",t):window.$communicator.$emit("notify",{info:"请先为动画命名"})},validateName:function(t){var e=this,i=t.target.value;""!==i&&(/^[a-zA-Z]/.test(i)||(this.$nextTick(function(){e.currentAnimation.name=""}),window.$communicator.$emit("notify",{info:"动画名称必须以英文开头"})),/\W/g.test(i)&&(this.$nextTick(function(){e.currentAnimation.name=i.replace(/\W/g,"")}),window.$communicator.$emit("notify",{info:"请勿使用英文和数字以外的字符"})))},play:function(){var t=this;this.$store.commit("setAnimation",!1),setTimeout(function(){var e=t.$store.state.animation;0!==e.length&&(e.map(function(t){var e="anm-"+t.name,i=document.getElementById(e);if(i)i.innerHTML=s(t.name,t,t.keyframes,!1);else{var n=document.createElement("style");n.id=e,n.innerHTML=s(t.name,t,t.keyframes,!1),document.head.append(n)}}),t.$store.commit("setAnimation",!0))},200)}},watch:{currentName:function(t){void 0!==this.activeElement.animationName&&(this.activeElement.animationName=t),this.getCurrentAnimation(t)},activeElement:function(t){void 0!==t.animationName?this.currentName=t.animationName:this.currentName=""}}},G={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return 3===t.tab?i("div",{staticClass:"panel-wrap"},[i("button",{staticClass:"btn btn-action float-right mx-1"},[i("icon",{attrs:{name:"plus"},on:{click:t.addAnimation}})],1),t._v(" "),i("button",{staticClass:"btn btn-action float-right"},[i("icon",{attrs:{name:"play"},on:{click:t.play}})],1),t._v(" "),i("div",{staticClass:"panel-row"},[i("icon",{attrs:{name:"film"}}),t._v(" "),i("div",{staticClass:"panel-label"},[t._v("选择动画")]),t._v(" "),i("div",{staticClass:"panel-value"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.currentName,expression:"currentName"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.currentName=e.target.multiple?i:i[0]}}},[i("option",{attrs:{value:""}},[t._v("无")]),t._v(" "),t._l(t.animationNames,function(e,n){return i("option",{key:n,domProps:{value:e}},[t._v(t._s(e))])})],2)])],1),t._v(" "),t.currentAnimation?i("div",[i("hr"),t._v(" "),i("div",{staticClass:"panel-row"},[i("icon",{attrs:{name:"type"}}),t._v(" "),i("div",{staticClass:"panel-label"},[t._v("动画名称")]),t._v(" "),i("div",{staticClass:"panel-value"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.currentAnimation.name,expression:"currentAnimation.name",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"动画名称，仅限英文"},domProps:{value:t.currentAnimation.name},on:{input:[function(e){e.target.composing||t.$set(t.currentAnimation,"name",e.target.value.trim())},t.validateName],blur:function(e){t.$forceUpdate()}}})])],1),t._v(" "),i("div",{staticClass:"panel-row"},[i("icon",{attrs:{name:"clock"}}),t._v(" "),i("div",{staticClass:"panel-label"},[t._v("动画时长")]),t._v(" "),i("div",{staticClass:"panel-value"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.currentAnimation.duration,expression:"currentAnimation.duration",modifiers:{number:!0}}],attrs:{type:"text",placeholder:"请输入大于0的数字"},domProps:{value:t.currentAnimation.duration},on:{input:function(e){e.target.composing||t.$set(t.currentAnimation,"duration",t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}})])],1),t._v(" "),i("div",{staticClass:"panel-row"},[i("icon",{attrs:{name:"watch"}}),t._v(" "),i("div",{staticClass:"panel-label"},[t._v("动画延迟")]),t._v(" "),i("div",{staticClass:"panel-value"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.currentAnimation.delay,expression:"currentAnimation.delay",modifiers:{number:!0}}],attrs:{type:"text",placeholder:"请输入不小于0的数字"},domProps:{value:t.currentAnimation.delay},on:{input:function(e){e.target.composing||t.$set(t.currentAnimation,"delay",t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}})])],1),t._v(" "),i("div",{staticClass:"panel-row"},[i("icon",{attrs:{name:"repeat"}}),t._v(" "),i("div",{staticClass:"panel-label"},[t._v("动画循环")]),t._v(" "),i("div",{staticClass:"panel-value"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.currentAnimation.iteration,expression:"currentAnimation.iteration",modifiers:{number:!0}}],attrs:{type:"text",placeholder:"输入0表示无限循环"},domProps:{value:t.currentAnimation.iteration},on:{input:function(e){e.target.composing||t.$set(t.currentAnimation,"iteration",t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}})])],1),t._v(" "),i("div",{staticClass:"panel-row"},[i("icon",{attrs:{name:"activity"}}),t._v(" "),i("div",{staticClass:"panel-label"},[t._v("缓动函数")]),t._v(" "),i("div",{staticClass:"panel-value"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.currentAnimation.timing,expression:"currentAnimation.timing"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.currentAnimation,"timing",e.target.multiple?i:i[0])}}},[i("option",[t._v("linear")]),t._v(" "),i("option",[t._v("ease")]),t._v(" "),i("option",[t._v("ease-in")]),t._v(" "),i("option",[t._v("ease-out")]),t._v(" "),i("option",[t._v("ease-in-out")])])])],1),t._v(" "),i("div",{staticClass:"panel-row"},[i("icon",{attrs:{name:"rotate-cw"}}),t._v(" "),i("div",{staticClass:"panel-label"},[t._v("动画方向")]),t._v(" "),i("div",{staticClass:"panel-value"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.currentAnimation.direction,expression:"currentAnimation.direction"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.currentAnimation,"direction",e.target.multiple?i:i[0])}}},[i("option",[t._v("normal")]),t._v(" "),i("option",[t._v("reverse")]),t._v(" "),i("option",[t._v("alternate")]),t._v(" "),i("option",[t._v("alternate-reverse")])])])],1),t._v(" "),i("div",{staticClass:"panel-row"},[i("icon",{attrs:{name:"chevrons-down"}}),t._v(" "),i("div",{staticClass:"panel-label"},[t._v("fill-mode")]),t._v(" "),i("div",{staticClass:"panel-value"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.currentAnimation.fill,expression:"currentAnimation.fill"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.currentAnimation,"fill",e.target.multiple?i:i[0])}}},[i("option",[t._v("none")]),t._v(" "),i("option",[t._v("forwards")]),t._v(" "),i("option",[t._v("backwards")]),t._v(" "),i("option",[t._v("both")])])])],1),t._v(" "),i("hr"),t._v(" "),t._l(t.currentAnimation.keyframes,function(e,n){return i("div",{key:n},[i("div",{staticClass:"panel-row"},[i("icon",{attrs:{name:"stop-circle"}}),t._v(" "),i("div",{staticClass:"panel-label"},[t._v("stop - "+t._s(n))]),t._v(" "),i("div",{staticClass:"panel-value"},[t._v(t._s(e.stop)+"%")]),t._v(" "),i("div",{staticClass:"panel-slider-wrap"},[i("slider",{attrs:{step:1},model:{value:e.stop,callback:function(i){t.$set(e,"stop",i)},expression:"val.stop"}})],1)],1),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.css,expression:"val.css"}],attrs:{placeholder:"IMPORTANT: use rem, not px"},domProps:{value:e.css},on:{input:function(i){i.target.composing||t.$set(e,"css",i.target.value)}}}),t._v(" "),i("div",{staticStyle:{margin:"10px 0 0 20px"}},[n+1===t.currentAnimation.keyframes.length?i("button",{staticClass:"btn btn-primary",on:{click:t.addkeyframe}},[i("icon",{attrs:{name:"plus"}}),t._v(" 添加新的动画\n        ")],1):t._e()])])})],2):t._e()]):t._e()},staticRenderFns:[]},J={components:{page:i("VU/8")({props:["activeElement","tab"]},D,!1,null,null,null).exports,appearance:i("VU/8")(I,Y,!1,null,null,null).exports,event:i("VU/8")({props:["activeElement","tab"]},H,!1,null,null,null).exports,animation:i("VU/8")(q,G,!1,function(t){i("89jG")},"data-v-94d83338",null).exports},data:function(){return{activeTab:1}},computed:{activeElement:function(){return this.$store.state.activeElement}}},Z={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("ul",{staticClass:"tab tab-block panel-tab"},[i("li",{staticClass:"tab-item",class:{active:1===t.activeTab},on:{click:function(e){t.activeTab=1}}},[i("a",[t._v("参数")])]),t._v(" "),i("li",{staticClass:"tab-item",class:{active:2===t.activeTab},on:{click:function(e){t.activeTab=2}}},[i("a",[t._v("交互")])]),t._v(" "),i("li",{staticClass:"tab-item",class:{active:3===t.activeTab},on:{click:function(e){t.activeTab=3}}},[i("a",[t._v("动画")])])]),t._v(" "),i("page",{attrs:{activeElement:t.activeElement,tab:t.activeTab}}),t._v(" "),i("appearance",{attrs:{activeElement:t.activeElement,tab:t.activeTab}}),t._v(" "),i("event",{attrs:{activeElement:t.activeElement,tab:t.activeTab}}),t._v(" "),i("animation",{attrs:{activeElement:t.activeElement,tab:t.activeTab}})],1)},staticRenderFns:[]},K=i("VU/8")(J,Z,!1,function(t){i("ntMS")},null,null).exports,Q={name:"ref-lines",methods:{attachHoriz:function(t){return this.horizontal.some(function(e){return Math.abs(e-t)<=1})},attachVerti:function(t){return this.vertical.some(function(e){return Math.abs(e-t)<=1})}},computed:{moving:function(){return this.$store.state.moving},guides:function(){var t=this.$store.state,e=[],i=t.uuid;return t.widgets.forEach(function(t){t.hasGuide&&t.uuid===i||t.hasGuide&&"page"!==t.belong||e.push({width:t.width,height:t.height,top:t.top,left:t.left})}),e},horiz:function(){var t=[];return this.guides.forEach(function(e){var i=e.top,n=i+e.height;t.indexOf(i)<0&&0!==i&&t.push(i),t.indexOf(n)<0&&t.push(n)}),t},verti:function(){var t=[375];return this.guides.forEach(function(e){var i=e.left,n=i+e.width;t.indexOf(i)<0&&0!==i&&t.push(i),t.indexOf(n)<0&&n<750&&t.push(n)}),t},horizontal:function(){var t=this.$store.state.activeElement;if(t){var e=Math.round(t.height);return[t.top,t.top+e]}return[]},vertical:function(){var t=this.$store.state.activeElement;if(t){var e=Math.round(t.width/2);return[t.left,t.left+e,t.left+2*e]}return[]}}},tt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.moving,expression:"moving"}],staticClass:"guides"},[t._l(t.horiz,function(e){return i("div",{directives:[{name:"show",rawName:"v-show",value:t.attachHoriz(e),expression:"attachHoriz(val)"}],key:e,staticClass:"horiz",style:{top:e+"px"}})}),t._v(" "),t._l(t.verti,function(e){return i("div",{directives:[{name:"show",rawName:"v-show",value:t.attachVerti(e),expression:"attachVerti(val)"}],key:e,staticClass:"verti",style:{left:e+"px"}})})],2)},staticRenderFns:[]},et={computed:{elm:function(){var t=this.$store.state.activeElement,e=this.$store.state.type;return["braid-bg","braid-pic","page"].indexOf(e)>-1?"":"page"!==t.belong?"":t}},data:function(){return{type:""}},methods:{handlemousedown:function(t,e,i,n){t.stopPropagation(),this.type=e,this.$store.commit("initmove",{startX:t.pageX,startY:t.pageY,originX:this.elm[i],originY:this.elm[n]}),document.addEventListener("mousemove",this.handlemousemove,!0),document.addEventListener("mouseup",this.handlemouseup,!0)},handlemousemove:function(t){t.stopPropagation(),t.preventDefault(),this.$store.commit("resize",{x:t.pageX,y:t.pageY,type:this.type})},handlemouseup:function(){document.removeEventListener("mousemove",this.handlemousemove,!0),document.removeEventListener("mouseup",this.handlemouseup,!0),this.$store.commit("stopmove")}}},it={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.elm,expression:"elm"}]},[i("div",{staticClass:"verti",style:{height:t.elm.height+"px",top:t.elm.top+"px",left:t.elm.left+"px"},on:{mousedown:function(e){t.handlemousedown(e,"left","left","width")}}},[i("div",{staticClass:"square"})]),t._v(" "),i("div",{staticClass:"verti",style:{height:t.elm.height+"px",top:t.elm.top+"px",left:t.elm.left+t.elm.width+"px"},on:{mousedown:function(e){t.handlemousedown(e,"right","width")}}},[i("div",{staticClass:"square"})]),t._v(" "),i("div",{staticClass:"horiz",style:{width:t.elm.width+"px",top:t.elm.top+"px",left:t.elm.left+"px"},on:{mousedown:function(e){t.handlemousedown(e,"up","top","height")}}},[i("div",{staticClass:"square"})]),t._v(" "),i("div",{staticClass:"horiz",style:{width:t.elm.width+"px",top:t.elm.top+t.elm.height+"px",left:t.elm.left+"px"},on:{mousedown:function(e){t.handlemousedown(e,"down","height")}}},[i("div",{staticClass:"square"})])])},staticRenderFns:[]},nt={name:"viewport",components:{ref:i("VU/8")(Q,tt,!1,function(t){i("Gtj6")},"data-v-6144ffef",null).exports,control:i("VU/8")(et,it,!1,function(t){i("tZQG")},"data-v-60585866",null).exports},mixins:[L],props:["zoom"],data:function(){return{}},mounted:function(){var t=this;document.getElementById("viewport").addEventListener("mousedown",this.handleSelection,!1),document.addEventListener("keydown",function(e){e.stopPropagation();var i=t.$store.state.activeElement;if(37!==e.keyCode||!i.left)return 38===e.keyCode&&i.top?(e.preventDefault(),void(i.top-=1)):void(39===e.keyCode&&i.left?i.left+=1:40===e.keyCode&&i.top&&(e.preventDefault(),i.top+=1));i.left-=1},!0)},methods:{handleSelection:function(t){var e=t.target,i=e.getAttribute("data-type");if(i){var n=e.getAttribute("data-uuid");this.$store.commit("select",{uuid:n||-1}),"page"===(e=this.$store.state.activeElement).belong&&"braid-bg"!==i&&this.initmovement(t)}else this.$store.commit("select",{uuid:-1})},replaceImage:function(t){var e=this;this.$store.state.activeElement.isUpload&&window.$communicator.$emit("upload",function(t){e.$store.commit("replaceImage",t)})}},computed:{widgetStore:function(){return this.$store.state.widgets.filter(function(t){return"page"===t.belong})},height:function(){return this.$store.state.page.height},backgroundColor:function(){return this.$store.state.page.backgroundColor},id:function(){return this.$store.state.uuid},playState:function(){return this.$store.state.playState}}},at={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"holder",attrs:{id:"viewport"}},[i("div",{staticClass:"screen",style:{backgroundColor:t.backgroundColor,height:t.height+"px",transform:"scale("+t.zoom/100+")"},on:{dblclick:t.replaceImage}},[t._l(t.widgetStore,function(e){return i(e.type,{key:e.uuid,tag:"component",staticClass:"layer",class:{"g-active":t.id===e.uuid},attrs:{val:e,h:t.height,w:750,playState:t.playState}})}),t._v(" "),i("ref"),t._v(" "),i("control")],2)])},staticRenderFns:[]},st=i("VU/8")(nt,at,!1,function(t){i("gny2")},"data-v-4e38ddb8",null).exports,ot={name:"vue-page-designer",store:N,components:{navbar:V,toolbar:B,panel:K,viewport:st},props:{value:Object,widgets:Object,upload:Function,uploadOption:Object},beforeCreate:function(){!function(t,e){var i=new XMLHttpRequest;if(!document.querySelector("#"+e)){var n=document.createElement("div");n.setAttribute("hidden",""),n.setAttribute("id",e),document.body.insertBefore(n,document.body.childNodes[0]),"withCredentials"in i&&(i.open("GET",t,!0),i.onload=function(){n.innerHTML=i.responseText},i.send())}}("//unpkg.com/vue-page-designer/dist/icons.svg","svgspriteit")},created:function(){var t=this;o.a.use(j,{widgets:this.widgets}),this.value&&N.replaceState(this.value),window.$communicator.$on("save",function(){t.$emit("save",N.state)})},mounted:function(){this.$store.commit("initActive")},methods:{dozoom:function(t){this.$store.commit("zoom",t)}},computed:{zoom:function(){return this.$store.state.zoom}}},rt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"app"},[e("navbar"),this._v(" "),e("div",{staticClass:"body container"},[e("div",{staticClass:"columns col-gapless"},[e("toolbar",{staticClass:"toolbar column",attrs:{zoom:this.zoom}}),this._v(" "),e("div",{staticClass:"viewport column"},[e("viewport",{attrs:{zoom:this.zoom}}),this._v(" "),e("div",{staticClass:"zoom-wrap"},[e("slider",{attrs:{value:this.zoom,step:1,tuning:!1},on:{input:this.dozoom}}),this._v(" "),e("div",{staticClass:"zoom-value"},[this._v(this._s(this.zoom)+"%")])],1)],1),this._v(" "),e("panel",{staticClass:"control-panel column"})],1)]),this._v(" "),e("uploader",{attrs:{upload:this.upload,uploadOption:this.uploadOption}}),this._v(" "),e("toast")],1)},staticRenderFns:[]},lt=i("VU/8")(ot,rt,!1,function(t){i("Aubw")},null,null).exports,ct={props:{value:{type:[Number,String],default:0},max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:Number,default:.1},tuning:{type:Boolean,default:!0}},data:function(){return{inputValue:this.value,active:!1,focused:!1,dragging:!1}},computed:{percent:function(){var t=(this.inputValue-this.min)/(this.max-this.min)*100;return t>100?100:t<0?0:t},fillStyle:function(){return{width:this.percent+"%"}},thumbStyle:function(){return{left:this.percent+"%"}},sliderClass:function(){return{zero:this.inputValue<=this.min,active:this.active}}},created:function(){this.handleDragMouseMove=this.handleDragMouseMove.bind(this),this.handleMouseEnd=this.handleMouseEnd.bind(this)},methods:{handleMouseDown:function(t){this.setValue(t),t.preventDefault(),document.addEventListener("mousemove",this.handleDragMouseMove),document.addEventListener("mouseup",this.handleMouseEnd),this.$el.focus(),this.onDragStart(t)},handleMouseUp:function(){this.active=!1},handleFocus:function(){this.focused=!0},handleBlur:function(){this.focused=!1},setValue:function(t){var e=this.$el,i=this.max,n=this.min,a=this.step,s=(t.clientX-e.firstElementChild.getBoundingClientRect().left)/e.firstElementChild.offsetWidth*(i-n);s=Math.round(s/a)*a+n,(s=parseFloat(s.toFixed(5)))>i?s=i:s<n&&(s=n),this.inputValue=s},onDragStart:function(t){this.dragging=!0,this.active=!0},onDragUpdate:function(t){var e=this;this.dragRunning||(this.dragRunning=!0,window.requestAnimationFrame(function(){e.dragRunning=!1,e.disabled||e.setValue(t)}))},onDragStop:function(t){this.dragging=!1,this.active=!1},handleDragMouseMove:function(t){this.onDragUpdate(t)},handleMouseEnd:function(t){document.removeEventListener("mousemove",this.handleDragMouseMove),document.removeEventListener("mouseup",this.handleMouseEnd),this.onDragStop(t)},increase:function(){this.inputValue>=this.max||(this.inputValue+=this.step)},decrease:function(){this.inputValue<=this.min||(this.inputValue-=this.step)}},watch:{value:function(t){this.inputValue=t},inputValue:function(t){this.$emit("input",t)}}},ut={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:{"mu-lisder-wrapper":t.tuning}},[i("div",{staticClass:"mu-slider",class:t.sliderClass,on:{focus:t.handleFocus,blur:t.handleBlur,mousedown:t.handleMouseDown,mouseup:t.handleMouseUp}},[i("input",{attrs:{type:"hidden"},domProps:{value:t.inputValue}}),t._v(" "),i("div",{staticClass:"mu-slider-track"}),t._v(" "),i("div",{staticClass:"mu-slider-fill",style:t.fillStyle}),t._v(" "),i("div",{staticClass:"mu-slider-thumb",style:t.thumbStyle})]),t._v(" "),t.tuning?i("div",{staticClass:"mu-increment",on:{mousedown:function(e){e.stopPropagation(),t.increase(e)}}},[t._v("+")]):t._e(),t._v(" "),t.tuning?i("div",{staticClass:"mu-decrement",on:{mousedown:function(e){e.stopPropagation(),t.decrease(e)}}},[t._v("-")]):t._e()])},staticRenderFns:[]},vt=i("VU/8")(ct,ut,!1,function(t){i("UOBu")},null,null).exports,dt={data:function(){return{info:"",type:"warning",show:!1}},computed:{klass:function(){return{"toast-success":"success"===this.type,"toast-warning":"warning"===this.type,"toast-error":"error"===this.type}}},mounted:function(){var t=this;window.$communicator.$on("notify",function(e){t.notify(e.info,e.type)})},methods:{notify:function(t,e){var i=this;this.show||(this.info=t||"Success!",e&&(this.type=e),this.show=!0,setTimeout(function(){i.show=!1},2e3))}}},mt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"drop"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:this.show,expression:"show"}],staticClass:"toast",class:this.klass},[this._v(this._s(this.info))])])},staticRenderFns:[]},pt=i("VU/8")(dt,mt,!1,function(t){i("qL7t")},null,null).exports,ht={props:{upload:Function,uploadOption:Object},data:function(){return{multiple:!1,uploader:null,cb:null}},computed:{top:function(){return this.$store.state.top}},mounted:function(){var t=this;this.uploader=document.getElementById("uploader"),window.$communicator.$on("upload",function(e,i){t.multiple=!!i,t.cb=e,setTimeout(function(){t.uploader.click()},0)})},methods:{handleUpload:function(){var t=this,e=this.uploader.files;if(e&&0!==e.length){e=Array.prototype.slice.call(this.uploader.files);(this.upload||this.defaultUpload)(e).then(function(e){console.log("status: ",e.status),new l.a(function(i){t.handleLoadQueue(i,e.files)()}).then(function(e){t.cb(e)})})}},defaultUpload:function(t){if(this.uploadOption.url){var e=new FormData;return t.forEach(function(t){return e.append("file[]",t)}),fetch(this.uploadOption.url,{method:"POST",body:e})}alert("请配置图片上传api地址")},handleLoadQueue:function(t,e){var i=this,n=0,a=e.length,s=[];return function o(){var r=window.URL.createObjectURL(e[n]);new l.a(function(t){i.getImageWidth(r,t)}).then(function(l){s.push({width:l.w,height:l.h,top:i.top,url:r,src:"images/"+e[n].name}),++n===a?t(s):o()})}},getImageWidth:function(t,e){var i=new Image;i.src=t,i.onload=function(){e({w:Math.round(i.width),h:Math.round(i.height)})}}}},ft={render:function(){var t=this.$createElement;return(this._self._c||t)("input",{staticStyle:{display:"none"},attrs:{type:"file",accept:"image/png, image/jpeg, image/gif",multiple:!!this.multiple&&"multiple",id:"uploader"},on:{change:this.handleUpload}})},staticRenderFns:[]},gt=i("VU/8")(ht,ft,!1,null,null,null).exports,_t={render:function(){var t=this.$createElement,e=this._self._c||t;return this.show?e("div",{staticClass:"mask"},[e("div",{staticClass:"box"},[e("div",{staticClass:"top"},[e("span",[this._v(this._s(this.title))]),this._v(" "),e("icon",{staticClass:"close",attrs:{name:"x"},on:{click:this.close}})],1),this._v(" "),e("div",{staticClass:"body"},[this._t("default",[this._v(this._s(this.content))])],2),this._v(" "),e("div",{staticClass:"footer"},[e("button",{staticClass:"btn",on:{click:this.confirm}},[this._v("确定")]),this._v(" "),e("button",{staticClass:"btn",on:{click:this.close}},[this._v("取消")])])])]):this._e()},staticRenderFns:[]},wt=i("VU/8")({props:["title","id","content"],data:function(){return{show:!1}},methods:{close:function(){this.show=!1},confirm:function(){this.$emit("confirm",this.id)}}},_t,!1,function(t){i("IZjw")},"data-v-b975f210",null).exports,yt={name:"icon",props:{svg:String,title:String,name:String,options:Object},computed:{icon:function(){return this.svg||'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><use xlink:href="#'+this.name+'"></svg>'}},methods:{handleClick:function(){this.$emit("click")}}},bt={render:function(){var t=this.$createElement;return(this._self._c||t)("i",{staticClass:"icon svg-icon",attrs:{title:this.title},domProps:{innerHTML:this._s(this.icon)},on:{click:this.handleClick}})},staticRenderFns:[]},Ct=i("VU/8")(yt,bt,!1,function(t){i("3nKj")},null,null).exports;i("h5AK");o.a.component("slider",vt),o.a.component("toast",pt),o.a.component("uploader",gt),o.a.component("popbox",wt),o.a.component("icon",Ct),window.$communicator=new o.a;var xt={data:function(){return{value:null,widgets:d.a,uploadOption:{url:"https://jsonplaceholder.typicode.com/photos"}}},created:function(){var t=window.localStorage.getItem("vpd-data");t&&(this.value=JSON.parse(t))},methods:{handleSave:function(t){console.log("saving:",t),window.localStorage.setItem("vpd-data",u()(t))},handleUpload:function(t){return console.log("uploading:",t),new l.a(function(e){e({files:t,status:200})})}},components:{vuePageDesigner:lt}},Et={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("vue-page-designer",{attrs:{value:this.value,widgets:this.widgets,upload:this.handleUpload,uploadOption:this.uploadOption},on:{save:this.handleSave}})],1)},staticRenderFns:[]},$t=i("VU/8")(xt,Et,!1,function(t){i("T3xJ")},null,null).exports;new o.a({el:"#app",render:t=>t($t)})},T3xJ:function(t,e){},UOBu:function(t,e){},ZxMX:function(t,e){},gny2:function(t,e){},h5AK:function(t,e){},ntMS:function(t,e){},qL7t:function(t,e){},tZQG:function(t,e){},uOz5:function(t,e){}},["Pa1R"]);
//# sourceMappingURL=app.96c0aa909d0c5f364ac6.js.map